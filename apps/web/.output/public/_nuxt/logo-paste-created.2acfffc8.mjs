import{h as w,k,o as a,b as r,e as n,G as c,H as g,t as m,l as _,L as S,E as p,p as E,f as C,P as L,D as b,M as T,i as I,O as P,F as y,r as v,j as N,c as h,Q as f,R as O,S as V}from"./entry.ed34affd.mjs";const D={data(){return{title:this.options!==void 0?this.options.title:"",priv:this.options!==void 0?this.options.isPrivate:!1,password:this.options!==void 0&&this.options.password.length>0?this.options.password:"",rotation:0}},props:{submitText:{type:String,default:()=>"Paste !"},options:{type:Object},loggedIn:{type:Boolean,default:()=>!1}},methods:{submit(){this.$emit("submit",{title:this.title,isPrivate:this.priv,password:this.password})},toggleMenu(){this.$refs.moreOptionsMenu.classList.toggle("hidden"),this.rotation=this.rotation===0?180:0}}},$=e=>(E("data-v-f57cfd42"),e=e(),C(),e),M={class:"mt-2 w-full lg:w-2xl"},j={class:"flex flex-row lg:flex-col space-x-2 lg:space-x-0 lg:space-y-2"},B={class:"flex flex-col justify-center"},R=p(" Options "),U={class:"text-green ml-2"},z={ref:"moreOptionsMenu",class:"overflow-hidden hidden px-4 py-4 text-xl px-4 bg-blue rounded shadow-md shadow-black/50"},A={class:"w-full flex items-center"},H=$(()=>n("label",{class:"w-1/3"},"Private",-1)),W=["disabled"],F=$(()=>n("span",{class:"text-sm text-gray-500 px-4"},"Logged in users only",-1)),G={class:"w-full flex items-center"},K=$(()=>n("label",{class:"w-1/3"},"Password",-1));function Q(e,t,s,u,o,l){const d=k("font-awesome-icon");return a(),r("div",M,[n("div",j,[c(n("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>o.title=i),maxlength:"50",tooltip:"Click to edit",placeholder:"Add paste title +",class:"p-2 text-center text-white rounded placeholder-white-100 border-none focus:outline-none text-lg text-bold flex-1 bg-darkgray"},null,512),[[g,o.title]]),n("button",{onClick:t[1]||(t[1]=(...i)=>l.submit&&l.submit(...i)),class:"accept bg-gradient-to-tr from-green to-orange rounded w-1/4 lg:w-full p-2 text-center hover:shadow-lg"},m(s.submitText),1)]),n("div",B,[n("a",{onClick:t[2]||(t[2]=(...i)=>l.toggleMenu&&l.toggleMenu(...i)),class:"select-none font-bold bg-clip-text text-lg m-2 text-transparent bg-gradient-to-tr from-green to-orange text-center cursor-pointer"},[R,n("span",U,[_(d,{icon:["fas","fa-caret-down"],rotation:o.rotation},null,8,["rotation"])])]),n("div",z,[n("div",A,[H,c(n("input",{"onUpdate:modelValue":t[3]||(t[3]=i=>o.priv=i),disabled:!s.loggedIn,type:"checkbox",class:"h-4 w-4 rounded border-3 border-black bg-darkgray accent-darkgray text-blue"},null,8,W),[[S,o.priv]]),F]),n("div",G,[K,c(n("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>o.password=i),type:"password",class:"p-px text-center text-white rounded border-none focus:outline-none text-lg text-bold bg-darkgray flex-1"},null,512),[[g,o.password]])])],512)])])}const q=w(D,[["render",Q],["__scopeId","data-v-f57cfd42"]]);function J(e,t){if(e!=null)if(e.createTextRange){var s=e.createTextRange();s.move("character",t),s.select()}else e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus()}const X={props:{lang:{type:String,default(){return"text"}},editable:{type:Boolean,default(){return!0}},value:{type:String,default(){return""}}},data(){return{text:this.value,inputElemet:void 0,codeDisplay:void 0,lineNumbers:void 0,editor:void 0,preCode:void 0}},watch:{lang:{handler:function(e,t){this.update()},flush:"post"},$route:{handler:function(){this.update({target:this.$data.inputElemet}),this.$data.editor.classList.remove("hide-editor")},deep:"true"}},mounted(){this.$data.inputElemet=this.$refs.input,this.$data.codeDisplay=this.$refs.code,this.$data.lineNumbers=this.$refs["line-numbers"],this.$data.editor=this.$refs.editor,this.$data.preCode=this.$refs["pre-code"],this.$data.editor.classList.remove("hide-editor"),setTimeout(this.update.bind(this,{target:this.$data.inputElemet}),100),window.addEventListener("resize",this.update.bind(this,{target:this.$data.inputElemet}))},methods:{update(){let e=this.text;e.charAt(e.length-1)==`
`&&(e+="\xA0"),this.$data.codeDisplay.textContent=e,L.highlightAll();const t=(e.match(/\n/g)||"").length+1;let s="";for(let l=1;l<=t;l++)s+=l+`
`;this.$data.lineNumbers.textContent=s;let u=[this.$data.inputElemet,this.$data.preCode];const o=this.$data.lineNumbers.clientWidth+10;for(let l=0;l<u.length;l++)u[l].style.left=o+"px",u[l].style.width=this.$data.editor.clientWidth-o+"px";this.$data.codeDisplay.style.width=this.$data.inputElemet.clientWidth+"px",this.$data.preCode.style.height=this.$data.inputElemet.clientHeight+"px",this.$data.lineNumbers.style.height=this.$data.inputElemet.clientHeight+"px",this.fixScroll()},fixScroll(){this.$data.preCode.scroll({left:this.$data.inputElemet.scrollLeft,top:this.$data.inputElemet.scrollTop,behavior:"instant"}),this.$data.lineNumbers.scroll({top:this.$data.inputElemet.scrollTop,behavior:"instant"})},type(e){if(e.key=="Tab"){e.preventDefault();let t=e.target.selectionStart,s=this.$data.inputElemet.value;this.$data.inputElemet.value=s.slice(0,t)+"	"+s.slice(t),J(this.$data.inputElemet,t+1),this.update({target:this.$data.inputElemet})}}}},Y={class:"editor hide-editor",ref:"editor"},Z=p("                "),ee=p(`\r
            `),te={ref:"line-numbers",class:"line-numbers"},se=["disabled"];function ne(e,t,s,u,o,l){return a(),r("div",{class:"editor-container",style:T(e.$attrs.style)},[n("div",Y,[n("pre",{ref:"pre-code",class:b(["language-"+s.lang,"pre-code code-container overflow-hidden h-md"])},[Z,n("code",{ref:"code",class:b(["language-"+s.lang,"code"])},`\r
                `,2),ee],2),n("pre",te,"1",512),c(n("textarea",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.text=d),disabled:!s.editable,onScroll:t[1]||(t[1]=(...d)=>l.fixScroll&&l.fixScroll(...d)),class:"code-container",ref:"input",onKeydown:t[2]||(t[2]=(...d)=>l.type&&l.type(...d)),onInput:t[3]||(t[3]=(...d)=>l.update&&l.update(...d)),resize:"false",spellcheck:"false"},null,40,se),[[g,o.text]])],512)],4)}const ie=w(X,[["render",ne]]),oe={props:{editable:{type:Boolean,default(){return!0}},value:{validator(e){return e.hasOwnProperty("name")&&e.hasOwnProperty("syntax")&&e.hasOwnProperty("content")},default(){return{name:"",syntax:"text",content:""}}}},data(){return{languages:I().public.supportedSyntaxes,selectedLang:this.value.syntax,title:this.value.name}},methods:{getValue(){return{name:this.title,syntax:this.selectedLang,content:this.$refs.editor.text}}}},le={class:"main shadow-black shadow-lg rounded"},ae={class:"header bg-gradient-to-tr from-green to-orange p-2 flex justify-center rounded"},de=["disabled"],re=["value"];function ue(e,t,s,u,o,l){const d=ie;return a(),r("div",le,[n("div",ae,[c(n("input",{disabled:!s.editable,"onUpdate:modelValue":t[0]||(t[0]=i=>o.title=i),type:"text",maxlength:"50",tooltip:"Click to edit",placeholder:"Name this snippet +",class:"flex-1 sm:mr-4 py-2 text-center text-white rounded placeholder-white-100 border-none focus:outline-none text-lg text-bold"},null,8,de),[[g,o.title,void 0,{trim:!0,lazy:!0}]]),c(n("select",{"onUpdate:modelValue":t[1]||(t[1]=i=>o.selectedLang=i),class:"bg-transparent rounded text-center border-none"},[(a(!0),r(y,null,v(o.languages,(i,x)=>(a(),r("option",{key:x,value:i},m(i),9,re))),128))],512),[[P,o.selectedLang]])]),_(d,{ref:"editor",style:{width:"100%","border-radius":"0 0 5px 5px"},lang:o.selectedLang,value:s.value.content,editable:s.editable},null,8,["lang","value","editable"])])}const ce=w(oe,[["render",ue],["__scopeId","data-v-62b58418"]]),pe={key:1,class:"sticky z-10 top-0 flex flex-col md:flex-row justify-between content-center text-center bg-gradient-to-tr from-green to-orange mb-4 p-4 rounded md:mr-2"},he={class:"text-3xl text-white text-shadow-sm"},fe={class:"text-lg text-black text-shadow-none"},me={class:"text-sm mb-1 text-dark-700"},ge={class:"h-min self-center"},xe=p("Created on "),be={ref:"editor-conteiner",class:"flex flex-col min-w-xs w-full editor lg:mr-8 pr-4 overflow-x-hidden md:overflow-y-auto md:max-h-2xl"},ye={key:0},ve={key:1},we={key:0,class:"w-full px-4 flex justify-center space-x-4"},_e={emits:["submit"],props:{editable:{type:Boolean,default:()=>!0},paste:{type:Object},submitText:{type:String},loggedIn:{type:Boolean,default:()=>!1}},data(){return{snippets:[0]}},watch:{snippets:{handler(){setTimeout(()=>{const e=this.$refs["editor-conteiner"];e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},10)},deep:!0}},mounted(){this.paste&&(this.paste.created=new Date(this.paste.created).toLocaleDateString())},methods:{createPaste(e){let t=[];this.$refs.snippet.forEach(u=>t.push(u.getValue()));const s={};Object.assign(s,e),s.fragments=t,this.$emit("submit",s)},addSnippet(){(this.loggedIn&&this.snippets.length<500||this.snippets.length<5)&&this.snippets.push(this.snippets[this.snippets.length-1]+1)},removeSnippet(){this.snippets.pop()}}},ke=Object.assign(_e,{__name:"PasteEditor",setup(e){return N(),(t,s)=>{const u=q,o=k("font-awesome-icon"),l=V,d=ce;return a(),r("div",{class:b(["flex flex-col",{"lg:flex-row-reverse":e.editable}])},[e.editable?(a(),h(u,{key:0,onSubmit:t.createPaste,ref:"side-menu",class:"mb-4 side-menu",options:e.paste,submitText:e.submitText,loggedIn:e.loggedIn},null,8,["onSubmit","options","submitText","loggedIn"])):(a(),r("div",pe,[n("h1",he,[p(m(e.paste.title)+" ",1),n("span",fe,"by "+m(e.paste.owner.username),1),n("span",me,[e.paste!=null&&e.paste.isPrivate?(a(),h(o,{key:0,icon:["fas","fa-eye-slash"],class:"ml-2"})):f("",!0),e.paste!=null&&e.paste.password?(a(),h(o,{key:1,icon:["fas","fa-lock"],class:"ml-2"})):f("",!0)])]),n("h2",ge,[xe,_(l,null,{default:O(()=>[p(m(e.paste.created),1)]),_:1})])])),n("div",be,[n("div",null,[e.paste?(a(),r("div",ye,[(a(!0),r(y,null,v(e.paste.fragments,(i,x)=>(a(),h(d,{ref_for:!0,ref:"snippet",key:x,value:i,editable:e.editable,class:"mb-8"},null,8,["value","editable"]))),128))])):(a(),r("div",ve,[(a(!0),r(y,null,v(t.snippets,i=>(a(),h(d,{ref_for:!0,ref:"snippet",key:i,editable:e.editable,class:"mb-8"},null,8,["editable"]))),128))]))]),e.editable?(a(),r("div",we,[e.loggedIn&&t.snippets.length<500||t.snippets.length<5?(a(),r("button",{key:0,onClick:s[0]||(s[0]=(...i)=>t.addSnippet&&t.addSnippet(...i)),class:"bg-green sm:px-10 flex-1 md:max-w-xs rounded py-2 hover:shadow-lg"},"Add snippet")):f("",!0),t.snippets.length>1?(a(),r("button",{key:1,ref:"remove",onClick:s[1]||(s[1]=(...i)=>t.removeSnippet&&t.removeSnippet(...i)),class:"bg-red-500 sm:px-10 flex-1 md:max-w-xs rounded py-2 hover:shadow-lg hide"},"Remove last snippet",512)):f("",!0)])):f("",!0)],512)],2)}}}),Se=""+new URL("logo-paste-loading.d9d6ef31.svg",import.meta.url).href,Ee=""+new URL("logo-paste-created.50923283.svg",import.meta.url).href;export{Se as _,Ee as a,ke as b};
