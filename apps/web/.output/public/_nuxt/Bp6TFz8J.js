import{_ as S}from"./CFYx16Dx.js";import{f as $,g as D,r as l,h as T,c as i,b as g,a as s,i as f,F as E,p as M,d as v,k as j,o as n,q as w,j as b,t as p,w as B,s as I,v as L,N as O}from"./Dp9ICUzo.js";const R=["id"],V={class:"md:w-4/5"},F=["href"],H={class:"text-2xl font-bold"},J={class:"text-sm font-normal italic text-gray-500"},U={class:"flex flex-row justify-between"},q=["href"],A=["onClick"],Q={key:1,class:"text-center"},W={__name:"index",setup(Y){const m=$(),y=D();let a=l([]),d=l(void 0),u=l(!1),c=l(null),k=l(0);const N=async t=>{await y.addNotification({type:O.CONFIRM,title:"Delete paste?",description:"This action can not be reversed!"})&&(await $fetch(`/api/paste/${t}`,{method:"DELETE",credentials:"include"}),await _())},_=async()=>{const t=await $fetch("/api/user/pastes",{credentials:"include",parseResponse:JSON.parse});a.value=t.result.pastes,d.value=t.result.nextPage;for(let e=0;e<a.value.length;e++)a.value[e].created=new Date(a.value[e].created).toLocaleDateString()},C=async()=>{const t=c.value.scrollTop+c.value.clientHeight;if(d&&t>c.value.scrollHeight-20&&!u){u=!0;const e=await $fetch(`/api/user/pastes?pageId=${this.nextPageId}`,{credentials:"include",parseResponse:JSON.parse});d=e.result.nextPage;for(let r=0;r<e.result.pastes.length;r++)e.result.pastes[r].created=new Date(e.result.pastes[r].created).toLocaleDateString();a=a.concat(e.result.pastes),u=!1}},x=t=>{document.title=`Quickpaste | ${t}`};{let t=m.username();t==""?setTimeout(()=>{let e=m.username();x(e)},200):x(t)}return T(()=>{a.value.length===0&&_()}),(t,e)=>{const r=S,h=j("font-awesome-icon"),P=I;return n(),i("div",{id:f(k),class:"flex flex-col md:flex-row w-full justify-between"},[g(r),s("div",V,[e[1]||(e[1]=s("h1",{class:"text-5xl mb-6 text-orange text-shadow-sm border-b border-blue pb-4"},"Pastes",-1)),f(a).length>0?(n(),i("div",{key:0,ref_key:"pasteContainer",ref:c,class:"max-h-prose overflow-y-auto",onScroll:C},[(n(!0),i(E,null,M(f(a),o=>(n(),i("div",{key:o.uuid,class:"flex flex-col md:flex-row justify-between content-cetner mr-2 p-2 px-8 mb-4 rounded bg-blue"},[s("a",{href:`/paste/${o.uuid}`},[s("h3",H,[v(p(o.title)+" ",1),s("span",J,"#"+p(o.uuid),1),o.isPrivate?(n(),w(h,{key:0,icon:["fas","fa-eye-slash"],class:"text-sm ml-2 mb-px"})):b("",!0),o.password?(n(),w(h,{key:1,icon:["fas","fa-lock"],class:"text-sm ml-2 mb-px"})):b("",!0)]),g(P,null,{default:B(()=>[s("p",null,"Created: "+p(o.created),1)]),_:2},1024)],8,F),s("div",U,[s("a",{class:"bg-green flex-1 m-2 rounded p-4 text-center",href:`/paste/${o.uuid}?edit=1`},"Edit",8,q),s("button",{class:"bg-red-600 flex-1 m-2 rounded p-4 text-center",onClick:L(z=>N(o.uuid),["stop"])},"Remove",8,A)])]))),128))],544)):(n(),i("div",Q,e[0]||(e[0]=[s("h2",{class:"text-gray-400"},[v("You can create some pastes "),s("a",{href:"/",class:"text-green"},"here")],-1)])))])],8,R)}}};export{W as default};
