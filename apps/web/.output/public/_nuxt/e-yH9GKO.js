import{s as h,a as x,_ as b}from"./hJSzFLvQ.js";import{_ as k,f as T,g as C,r as l,h as O,c as n,i as s,b as p,a as t,j as g,d as c,t as P,w as S,e as j,k as F,o as i,N as m}from"./Dp9ICUzo.js";const A={key:0,class:"container"},V={key:1},B={key:0,class:"flex flex-row justify-center items-center mt-12"},E=["data"],q={ref:"img0",src:h},D={key:1},$={key:0,class:"flex flex-row justify-center items-center mt-12"},J=["data"],L={ref:"img1",src:x},M={class:"doneText bg-gradient-to-tr from-green to-orange rounded p-6 mt-6 h-min"},Q=["href"],U={key:1,class:"flex flex-row justify-center items-center mt-12"},Y={class:"doneText bg-gradient-to-tr from-green to-orange rounded p-6 h-min"},z={__name:"index",setup(G){const v=T(),a=C(),y=v.user()!=null;let u=l(!1),r=l(void 0),d=l(200),_=l(void 0);const N=async f=>{_.value=f,u.value=!0;const e=await fetch("/api/paste",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(f)}),o=await e.json();if(d.value=e.status,r.value=o.result,!o.ok){if(d.value==429)return;u.value=!1,o.result.includes("title")?a.addNotification({title:"Paste title is missing",type:m.NOTIFICATION,level:1}):o.result.includes("name")?a.addNotification({title:"One or more fragments are missing a title",type:m.NOTIFICATION,level:1}):o.result.includes("content")?a.addNotification({title:"Some fragments are missing a title",description:"Please deleate them, or add missing content",type:m.NOTIFICATION,level:1}):a.addNotification({title:"Error accured when creating the paste",description:"Please try again.",type:m.NOTIFICATION,level:1})}};return O(()=>{document.title="Quickpaste"}),(f,e)=>{const o=b,I=F("font-awesome-icon"),w=j;return i(),n("div",null,[s(u)?(i(),n("div",V,[s(r)?(i(),n("div",D,[s(d)==200?(i(),n("div",$,[t("object",{class:"w-100px sm:w-150px md:w-300px",type:"image/svg+xml",data:s(x)},[t("img",L,null,512)],8,J),t("div",M,[e[2]||(e[2]=t("h2",{class:"text-2xl font-bold"},"Paste created!",-1)),t("h3",null,[e[1]||(e[1]=c(" Check it at: ")),t("a",{class:"font-bold",href:`/paste/${s(r).pasteId}`},[c(P(s(r).pasteId)+" ",1),p(I,{icon:["fas","arrow-up-right-from-square"]})],8,Q)])])])):g("",!0),s(d)==429?(i(),n("div",U,[t("div",Y,[e[5]||(e[5]=t("h2",{class:"text-2xl font-bold"},"Daily paste limit reached",-1)),t("h3",null,[e[4]||(e[4]=c(" You have surpassed your daily paste limit. For more information see ")),p(w,{href:"/api-docs#limits"},{default:S(()=>e[3]||(e[3]=[c("here")])),_:1})])])])):g("",!0)])):(i(),n("div",B,[t("object",{width:"300",height:"300",type:"image/svg+xml",data:s(h)},[t("img",q,null,512)],8,E),e[0]||(e[0]=t("div",{class:"bg-gradient-to-tr from-green to-orange rounded p-6 h-min hidden md:block"},[t("h2",{class:"text-2xl font-bold"},"Creating paste...")],-1))]))])):(i(),n("div",A,[p(o,{onSubmit:N,paste:s(_),loggedIn:y},null,8,["paste"])]))])}}},R=k(z,[["__scopeId","data-v-e68b806c"]]);export{R as default};
