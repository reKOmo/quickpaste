import{y as N,B as V,Q as I,_ as w,k as E,c as u,o as d,a as i,L as h,M as v,t as y,d as m,b as C,R as L,P as A,S as k,T as B,m as P,l as U,r as _,U as D,F as S,p as $,i as M,q as x,j as b,w as R,s as j}from"./Dp9ICUzo.js";const O="$s";function z(...t){const e=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(e);const[s,r]=t;if(!s||typeof s!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+s);if(r!==void 0&&typeof r!="function")throw new Error("[nuxt] [useState] init must be a function: "+r);const o=O+s,n=N(),l=V(n.payload.state,o);if(l.value===void 0&&r){const a=r();if(I(a))return n.payload.state[o]=a,a;l.value=a}return l}const W={data(){return{title:this.options!==void 0?this.options.title:"",priv:this.options!==void 0?this.options.isPrivate:!1,password:this.options!==void 0&&this.options.password.length>0?this.options.password:"",rotation:null}},props:{submitText:{type:String,default:()=>"Paste !"},options:{type:Object},loggedIn:{type:Boolean,default:()=>!1}},methods:{submit(){this.$emit("submit",{title:this.title,isPrivate:this.priv,password:this.password})},toggleMenu(){this.$refs.moreOptionsMenu.classList.toggle("hidden"),this.rotation=this.rotation===null?180:null}}},H={class:"mt-2 w-full lg:w-2xl"},K={class:"flex flex-row lg:flex-col space-x-2 lg:space-x-0 lg:space-y-2"},F={class:"flex flex-col justify-center"},q={class:"text-green ml-2"},G={ref:"moreOptionsMenu",class:"overflow-hidden hidden px-4 py-4 text-xl px-4 bg-blue rounded shadow-md shadow-black/50"},J={class:"w-full flex items-center"},Q=["disabled"],Z={class:"w-full flex items-center"};function X(t,e,s,r,o,n){const l=E("font-awesome-icon");return d(),u("div",H,[i("div",K,[h(i("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>o.title=a),maxlength:"50",tooltip:"Click to edit",placeholder:"Add paste title",class:"p-2 text-center text-white rounded placeholder-white-100 border-none focus:outline-none text-lg text-bold flex-1 bg-darkgray"},null,512),[[v,o.title]]),i("button",{onClick:e[1]||(e[1]=(...a)=>n.submit&&n.submit(...a)),class:"accept bg-gradient-to-tr from-green to-orange rounded w-1/4 lg:w-full p-2 text-center hover:shadow-lg"},y(s.submitText),1)]),i("div",F,[i("a",{onClick:e[2]||(e[2]=(...a)=>n.toggleMenu&&n.toggleMenu(...a)),class:"select-none font-bold bg-clip-text text-lg m-2 text-transparent bg-gradient-to-tr from-green to-orange text-center cursor-pointer"},[e[5]||(e[5]=m(" Options ")),i("span",q,[C(l,{icon:["fas","fa-caret-down"],rotation:o.rotation},null,8,["rotation"])])]),i("div",G,[i("div",J,[e[6]||(e[6]=i("label",{class:"w-1/3"},"Private",-1)),h(i("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>o.priv=a),disabled:!s.loggedIn,type:"checkbox",class:"h-4 w-4 rounded border-3 border-black bg-darkgray accent-darkgray text-blue"},null,8,Q),[[L,o.priv]]),e[7]||(e[7]=i("span",{class:"text-sm text-gray-500 px-4"},"Logged in users only",-1))]),i("div",Z,[e[8]||(e[8]=i("label",{class:"w-1/3"},"Password",-1)),h(i("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>o.password=a),type:"password",class:"p-px text-center text-white rounded border-none focus:outline-none text-lg text-bold bg-darkgray flex-1"},null,512),[[v,o.password]])])],512)])])}const Y=w(W,[["render",X],["__scopeId","data-v-7ed87ee8"]]);function ee(t,e){if(t!=null)if(t.createTextRange){var s=t.createTextRange();s.move("character",e),s.select()}else t.selectionStart?(t.focus(),t.setSelectionRange(e,e)):t.focus()}const te={props:{lang:{type:String,default(){return"text"}},editable:{type:Boolean,default(){return!0}},value:{type:String,default(){return""}}},data(){return{text:this.value,inputElemet:void 0,codeDisplay:void 0,lineNumbers:void 0,editor:void 0,preCode:void 0}},watch:{lang:{handler:function(t,e){this.update()},flush:"post"},$route:{handler:function(){this.update({target:this.$data.inputElemet}),this.$data.editor.classList.remove("hide-editor")},deep:"true"}},mounted(){this.$data.inputElemet=this.$refs.input,this.$data.codeDisplay=this.$refs.code,this.$data.lineNumbers=this.$refs["line-numbers"],this.$data.editor=this.$refs.editor,this.$data.preCode=this.$refs["pre-code"],this.$data.editor.classList.remove("hide-editor"),setTimeout(this.update.bind(this,{target:this.$data.inputElemet}),100),window.addEventListener("resize",this.update.bind(this,{target:this.$data.inputElemet}))},methods:{update(){let t=this.text;t.charAt(t.length-1)==`
`&&(t+="Â "),this.$data.codeDisplay.textContent=t,A.highlightAll();const e=(t.match(/\n/g)||"").length+1;let s="";for(let n=1;n<=e;n++)s+=n+`
`;this.$data.lineNumbers.textContent=s;let r=[this.$data.inputElemet,this.$data.preCode];const o=this.$data.lineNumbers.clientWidth+10;for(let n=0;n<r.length;n++)r[n].style.left=o+"px",r[n].style.width=this.$data.editor.clientWidth-o+"px";this.$data.codeDisplay.style.width=this.$data.inputElemet.clientWidth+"px",this.$data.preCode.style.height=this.$data.inputElemet.clientHeight+"px",this.$data.lineNumbers.style.height=this.$data.inputElemet.clientHeight+"px",this.fixScroll()},fixScroll(){this.$data.preCode.scroll({left:this.$data.inputElemet.scrollLeft,top:this.$data.inputElemet.scrollTop,behavior:"instant"}),this.$data.lineNumbers.scroll({top:this.$data.inputElemet.scrollTop,behavior:"instant"})},type(t){if(t.key=="Tab"){t.preventDefault();let e=t.target.selectionStart,s=this.$data.inputElemet.value;this.$data.inputElemet.value=s.slice(0,e)+"	"+s.slice(e),ee(this.$data.inputElemet,e+1),this.update({target:this.$data.inputElemet})}}}},se={class:"editor hide-editor",ref:"editor"},ne={ref:"line-numbers",class:"line-numbers"},ie=["disabled"];function oe(t,e,s,r,o,n){return d(),u("div",{class:"editor-container",style:B(t.$attrs.style)},[i("div",se,[i("pre",{ref:"pre-code",class:k(["language-"+s.lang,"pre-code code-container overflow-hidden h-md"])},[e[4]||(e[4]=m("                ")),i("code",{ref:"code",class:k(["language-"+s.lang,"code"])},`
                `,2),e[5]||(e[5]=m(`
            `))],2),i("pre",ne,"1",512),h(i("textarea",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.text=l),disabled:!s.editable,onScroll:e[1]||(e[1]=(...l)=>n.fixScroll&&n.fixScroll(...l)),class:"code-container",ref:"input",onKeydown:e[2]||(e[2]=(...l)=>n.type&&n.type(...l)),onInput:e[3]||(e[3]=(...l)=>n.update&&n.update(...l)),resize:"false",spellcheck:"false"},null,40,ie),[[v,o.text]])],512)],4)}const le=w(te,[["render",oe]]),ae=()=>z("supportedSyntaxes",()=>{const t=P().public.supportedSyntaxes;return t?JSON.parse(t):[]}),de={class:"main shadow-black shadow-lg rounded"},re={class:"header bg-gradient-to-tr from-green to-orange p-2 flex justify-center rounded"},ue=["disabled"],pe=["value"],ce=U({__name:"SnippetEditor",props:{editable:{type:Boolean,default:!0},value:{type:Object,default:()=>({name:"",syntax:"text",content:""})}},setup(t,{expose:e}){const s=t,r=ae(),o=_(s.value.syntax||"text"),n=_(s.value.name),l=_(null);function a(){var g;return{name:n.value,syntax:o.value,content:((g=l.value)==null?void 0:g.text)||""}}return e({getValue:a,editor:l}),(g,f)=>{const p=le;return d(),u("div",de,[i("div",re,[h(i("input",{disabled:!t.editable,"onUpdate:modelValue":f[0]||(f[0]=c=>n.value=c),type:"text",maxlength:"50",tooltip:"Click to edit",placeholder:"Name this snippet",class:"flex-1 sm:mr-4 py-2 text-center text-white rounded placeholder-white-100 border-none focus:outline-none text-lg text-bold"},null,8,ue),[[v,n.value,void 0,{trim:!0,lazy:!0}]]),h(i("select",{"onUpdate:modelValue":f[1]||(f[1]=c=>o.value=c),class:"bg-transparent rounded w-6em md:w-10em text-center border-none"},[(d(!0),u(S,null,$(M(r),(c,T)=>(d(),u("option",{key:T,value:c},y(c),9,pe))),128))],512),[[D,o.value]])]),C(p,{ref_key:"editor",ref:l,style:{width:"100%","border-radius":"0 0 5px 5px"},lang:o.value,value:t.value.content,editable:t.editable},null,8,["lang","value","editable"])])}}}),fe=w(ce,[["__scopeId","data-v-59c1c676"]]),he={emits:["submit"],props:{editable:{type:Boolean,default:()=>!0},paste:{type:Object},submitText:{type:String},loggedIn:{type:Boolean,default:()=>!1}},data(){return{snippets:[0]}},mounted(){this.paste&&(this.paste.created=new Date(this.paste.created).toLocaleDateString())},methods:{scrollSnippets(){setTimeout(()=>{const t=this.$refs["editor-conteiner"];t.scrollTo({top:t.scrollHeight,behavior:"smooth"})},10)},snippetAmount(){return this.paste?this.paste.fragments.length:this.snippets.length},createPaste(t){let e=[];this.$refs.snippet.forEach(r=>e.push(r.getValue()));const s={};Object.assign(s,t),s.fragments=e,this.$emit("submit",s)},addSnippet(){const t=this.paste?this.paste.fragments:this.snippets,e=this.paste?t.length[t.length-1]+1:void 0;(this.loggedIn&&t.length<500||t.length<5)&&t.push(e),this.scrollSnippets()},removeSnippet(){(this.paste?this.paste.fragments:this.snippets).pop(),this.scrollSnippets()}}},me={key:1,class:"sticky z-10 top-0 flex flex-col md:flex-row justify-between content-center text-center bg-gradient-to-tr from-green to-orange mb-4 p-4 rounded md:mr-2"},ge={class:"text-3xl text-white text-shadow-sm"},xe={class:"text-lg text-black text-shadow-none"},be={class:"text-sm mb-1 text-dark-700"},ye={class:"h-min self-center"},ve={ref:"editor-conteiner",class:"flex flex-col min-w-xs w-full editor lg:mr-8 pr-4 overflow-x-hidden md:overflow-y-auto md:max-h-2xl"},we={key:0},_e={key:1},ke={key:0,class:"w-full px-4 flex justify-center space-x-4"};function Se(t,e,s,r,o,n){const l=Y,a=E("font-awesome-icon"),g=j,f=fe;return d(),u("div",{class:k(["flex flex-col",{"lg:flex-row-reverse":s.editable}])},[s.editable?(d(),x(l,{key:0,onSubmit:n.createPaste,ref:"side-menu",class:"mb-4 side-menu",options:s.paste,submitText:s.submitText,loggedIn:s.loggedIn},null,8,["onSubmit","options","submitText","loggedIn"])):(d(),u("div",me,[i("h1",ge,[m(y(s.paste.title)+" ",1),i("span",xe,"by "+y(s.paste.owner.username),1),i("span",be,[s.paste!=null&&s.paste.isPrivate?(d(),x(a,{key:0,icon:["fas","fa-eye-slash"],class:"ml-2"})):b("",!0),s.paste!=null&&s.paste.password?(d(),x(a,{key:1,icon:["fas","fa-lock"],class:"ml-2"})):b("",!0)])]),i("h2",ye,[e[2]||(e[2]=m("Created on ")),C(g,null,{default:R(()=>[m(y(s.paste.created),1)]),_:1})])])),i("div",ve,[i("div",null,[s.paste?(d(),u("div",we,[(d(!0),u(S,null,$(s.paste.fragments,(p,c)=>(d(),x(f,{ref_for:!0,ref:"snippet",key:c,value:p,editable:s.editable,class:"mb-8"},null,8,["value","editable"]))),128))])):(d(),u("div",_e,[(d(!0),u(S,null,$(o.snippets,p=>(d(),x(f,{ref_for:!0,ref:"snippet",key:p,editable:s.editable,class:"mb-8"},null,8,["editable"]))),128))]))]),s.editable?(d(),u("div",ke,[s.loggedIn&&n.snippetAmount()<500||n.snippetAmount()<5?(d(),u("button",{key:0,onClick:e[0]||(e[0]=(...p)=>n.addSnippet&&n.addSnippet(...p)),class:"bg-green sm:px-10 flex-1 md:max-w-xs rounded py-2 hover:shadow-lg"},"Add snippet")):b("",!0),n.snippetAmount()>1?(d(),u("button",{key:1,ref:"remove",onClick:e[1]||(e[1]=(...p)=>n.removeSnippet&&n.removeSnippet(...p)),class:"bg-red-500 sm:px-10 flex-1 md:max-w-xs rounded py-2 hover:shadow-lg hide"},"Remove last snippet",512)):b("",!0)])):b("",!0)],512)],2)}const Ce=w(he,[["render",Se]]),Ee=""+new URL("logo-paste-loading.DNBVPCrc.svg",import.meta.url).href,Te=""+new URL("logo-paste-created.wGUnUIZN.svg",import.meta.url).href;export{Ce as _,Te as a,Ee as s};
