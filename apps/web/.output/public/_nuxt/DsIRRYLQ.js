import{x,r as g,G as f,o as s,c as i,a as e,b as _,N as u,_ as w,J as p,K as k,t as h,B as y,U as b}from"./z7Z8vRUf.js";import{_ as v}from"./BJhQ9Pbq.js";const A={class:"flex flex-col"},N=e("p",{class:"ml-2 mb-4 text-gray-200"},"After clicking the button a new API key will be generated and all previous ones will be deemd invalid.",-1),T={class:"flex flex-row bg-darkgray rounded p-4 text-gray-200 shadow-black shadow-sm my-2 max-w-sm mx-auto"},O={class:"flex justify-center items-center mr-2"},C=e("div",{class:"flex flex-col"},[e("p",{class:"text-md"},"Please save the key after it is shown as you will not be able to retrieve it.")],-1),$={class:"mt-4 flex"},I={key:0,class:"bg-darkgray rounded flex w-3/4 m-auto"},E=["value"],S={data(){return{key:void 0}},methods:{async getNewKey(){const n=await fetch("/user/generatePermaKey",{method:"GET",credentials:"include"});if(n.ok){const o=await n.json();this.key=o.result}else notificationStore.addNotification({type:u.NOTIFICATION,level:1,title:"To genedate api key"})}}},j=Object.assign(S,{__name:"GenerateApiKey",setup(n){const o=x(),a=g(null),r=async()=>{a.value.select(),a.value.setSelectionRange(0,99999);try{await navigator.clipboard.writeText(a.value.value),o.addNotification({type:u.NOTIFICATION,level:0,title:"Copied!"})}catch{o.addNotification({type:u.NOTIFICATION,level:1,title:"Failed to copy"})}};return(t,c)=>{const l=f("font-awesome-icon");return s(),i("div",A,[N,e("div",T,[e("div",O,[_(l,{icon:["fas","fa-circle-exclamation"],size:"xl","fixed-width":"",class:"text-red-500"})]),C]),e("div",$,[t.key?(s(),i("div",I,[e("input",{ref_key:"keyContainer",ref:a,class:"flex-1 text-monospace text-gray-200 bg-darkgray rounded border-none text-center p-2 max-w-2xl break-word overflow-x-scroll",value:t.key,readonly:""},null,8,E),e("div",{onClick:r,class:"text-gray-200 p-2 text-xl flex justify-center items-center hover:text-orange transition cursor-pointer"},[_(l,{icon:["fa-solid","fa-copy"]})])])):(s(),i("button",{key:1,onClick:c[0]||(c[0]=(...d)=>t.getNewKey&&t.getNewKey(...d)),class:"m-auto bg-gradient-to-tr from-green to-orange rounded p-4 text-center text-lg hover:shadow-lg my-4"},"Generate key"))])])}}}),L=j,K={class:"flex flex-col"},P=e("p",{class:"ml-2 mb-4 text-gray-200"},"Click button below to delete your account.",-1),D={class:"flex flex-row bg-darkgray rounded p-4 text-gray-200 shadow-black shadow-sm my-2 max-w-sm mx-auto"},F={class:"flex justify-center items-center mr-2"},G=e("div",{class:"flex flex-col"},[e("p",{class:"text-md"},"DELETING YOUR ACCOUNT WILL ALSO DELETE ALL PASTES THAT YOU CREATED PERMANENTLY WITHOUT A WAY OF RECOVERING THEM")],-1),R={class:"mt-4 flex"},U={methods:{async deleteAccount(){if(await this.notificationStore.addNotification({type:u.CONFIRM,title:"Are you sure you want to delete your account?",description:"This action can not be undone and will result in permanent data loss!"})){const o=await fetch("/user/deleteAccount",{method:"GET",credentials:"include",redirect:"follow"});o.redirected?window.location="/":o.ok||this.notificationStore.addNotification({type:u.NOTIFICATION,title:"Error accoured while deleting account. Please try again"})}}}},B=Object.assign(U,{__name:"DeleteAccount",setup(n){return x(),(o,a)=>{const r=f("font-awesome-icon");return s(),i("div",K,[P,e("div",D,[e("div",F,[_(r,{icon:["fas","fa-circle-exclamation"],size:"xl","fixed-width":"",class:"text-red-500"})]),G]),e("div",R,[e("button",{onClick:a[0]||(a[0]=(...t)=>o.deleteAccount&&o.deleteAccount(...t)),class:"m-auto bg-red-500 rounded p-4 text-center text-lg hover:shadow-lg my-4"},"Delete account")])])}}}),Y=B,H={emits:["picked"],props:{options:{type:Object,default:()=>{}}},methods:{pick(n){this.$emit("picked",n)}}},M=e("h2",{class:"text-3xl border-b-1 border-black pb-2 mb-4"},"Settings",-1),V=["onClick"];function W(n,o,a,r,t,c){return s(),i(p,null,[M,e("ul",null,[(s(!0),i(p,null,k(a.options,(l,d)=>(s(),i("li",{key:d,onClick:m=>c.pick(l),class:"text-lg hover:text-gray-200 transition cursor-pointer"},h(l.name),9,V))),128))])],64)}const z=w(H,[["render",W]]),J={class:"flex flex-col md:flex-row w-full justify-between"},q={class:"md:w-4/5"},Q={key:0},X={class:"w-full flex justify-center items-center pt-2 text-xl border-b-1 border-black mb-2 text-gray-200"},Z={data(){return{option:void 0}},methods:{changeOption(n){this.option=n}}},ne=Object.assign(Z,{__name:"Settings",setup(n){const r=[{name:"Generate Api Key",component:L},{name:"Delete Account",component:Y}];return(t,c)=>{const l=v,d=f("font-awesome-icon"),m=z;return s(),i("div",J,[_(l),e("div",q,[t.option?(s(),i("div",Q,[e("div",X,[_(d,{icon:["fas","arrow-left"],onClick:c[0]||(c[0]=ee=>t.changeOption(void 0)),class:"mr-4 p-2 cursor-pointer text-black hover:text-orange transition"}),e("span",null,h(t.option.name),1)]),(s(),y(b(t.option.component)))])):(s(),y(m,{key:1,onPicked:t.changeOption,options:r},null,8,["onPicked"]))])])}}});export{ne as default};
