import{s as K,a as R,_ as $}from"./logo-paste-created.acb6ac43.js";import{s as q,E as z,A as D,G as C,r as _,H as k,f as F,B as H,t as l,u as a,c as Q,v as e,I as j,y as V,l as J,J as U,K as G,L,M as W,N as y,o as r,O as X,Q as Y,z as Z}from"./entry.ac7ce826.js";import{a as E,b as ee}from"./ssr.3fd4b89c.js";const x=m=>(X("data-v-2f879e9d"),m=m(),Y(),m),te={key:0},se={key:1,class:"flex flex-row justify-center items-center mt-12"},ae=["data"],oe={ref:"img0",src:K},ie=x(()=>e("div",{class:"bg-gradient-to-tr from-green to-orange rounded p-6 h-min hidden md:block"},[e("h2",{class:"text-2xl font-bold"},"Creating paste")],-1)),ne={key:2,class:"flex flex-row justify-center items-center mt-12"},re=["data"],le={ref:"img1",src:R},ce={class:"doneText bg-gradient-to-tr from-green to-orange rounded p-6 h-min"},de=x(()=>e("h2",{class:"text-2xl font-bold"},"Paste created!",-1)),ue=["href"],pe={key:1},fe={key:0,class:"flex flex-col items-center space-y-4"},_e=x(()=>e("h2",{class:"text-xl text-gray-300"},"Enter password to view the paste",-1)),me={class:"flex flex-col md:flex-row space-y-2 md:space-y-0"},he=["onKeyup"],ve={key:1},ge=x(()=>e("div",{class:"flex flex-col justify-center content-center text-center bg-gradient-to-tr from-green to-orange mb-4 p-4 rounded"},[e("h1",{class:"text-3xl text-white text-shadow-sm"}," No paste here ")],-1)),ye=[ge],xe={__name:"[pasteId]",async setup(m){let i,h;const N=z(),c=D();let{data:B,error:v}=([i,h]=C(async()=>E("paste",async o=>{const u=k().params.pasteId,n=ee().cookie,f={};return n.split(";").forEach(g=>{const S=g.split("=");f[S[0].trim()]=S[1]}),await $fetch(`${Z().public.webAddress}/api/paste/${u}`,{headers:{Authorization:"ApiKey "+f.quickpaste_auth},parseResponse:JSON.parse})},{server:!0})),i=await i,h(),i),t=_(B);t.value,v.value&&console.log(v.value);let{data:w}=([i,h]=C(()=>E("error",()=>v.value?v.value.response.status:200,{server:!0})),i=await i,h(),i),T=_(!1);const P=k();let s=_("");function O(){if(N.user()==null||t.value==null||t.value.owner.id!=N.id())return;k().query.edit&&(T.value=!0)}async function A(){if(s.value.length===0){c.addNotification({type:1,title:"Please enter password to view",level:1});return}const o=await fetch(`/api/paste/${P.params.pasteId}`,{method:"GET",headers:{"Paste-Authorization":s.value},credentials:"include"});if(o.ok)t.value=await o.json(),w=0,s.value.length!=0&&(t.value.password=s.value),O(),document.title="Quickpaste | "+t.value.title.substring(0,25);else{switch(o.status){case 401:c.addNotification({type:1,title:"Incorrect password",level:1});break}s.value="",w=o.status}}let p=_(0),b=_(void 0);const M=async o=>{p.value=1,t.value=o;const d={"Content-Type":"application/json"};s.value.length!=0&&(d["Paste-Authorization"]=s.value);const u=await fetch(`/api/paste/${P.params.pasteId}`,{method:"PUT",headers:d,credentials:"include",body:JSON.stringify(o)}),n=await u.json();u.ok?(p.value=2,b.value=n.result):(p.value=0,n.result.includes("title")?c.addNotification({title:"Paste title is missing",type:y.NOTIFICATION,level:1}):n.result.includes("name")?c.addNotification({title:"One or more fragments are missing a title",type:y.NOTIFICATION,level:1}):n.result.includes("content")?c.addNotification({title:"One or more fragments are missing content",description:"Please deleate them, or add missing content",type:y.NOTIFICATION,level:1}):c.addNotification({title:"Error accured when creating the paste",description:"Please try again.",type:y.NOTIFICATION,level:1}))};return t.value&&(document.title="Quickpaste | "+t.value.title.substring(0,25)),F(()=>{console.log(t),O()}),(o,d)=>{var f,I;const u=$,n=H("font-awesome-icon");return r(),l("div",null,[a(t)?(r(),l("div",te,[a(p)==0?(r(),Q(u,{key:0,onSubmit:M,paste:a(t),editable:a(T),submitText:"Re-Paste !"},null,8,["paste","editable"])):a(p)==1?(r(),l("div",se,[e("object",{width:"300",height:"300",type:"image/svg+xml",data:a(K)},[e("img",oe,null,512)],8,ae),ie])):(r(),l("div",ne,[e("object",{class:"w-100px sm:w-150px md:w-300px",type:"image/svg+xml",data:a(R)},[e("img",le,null,512)],8,re),e("div",ce,[de,e("h3",null,[j(" Check it at: "),e("a",{class:"font-bold",href:`/${(f=a(b))==null?void 0:f.pasteId}`},[j(V((I=a(b))==null?void 0:I.pasteId)+" ",1),J(n,{icon:["fas","fa-arrow-up-right-from-square"]})],8,ue)])])]))])):(r(),l("div",pe,[a(w)==401?(r(),l("div",fe,[_e,e("div",me,[U(e("input",{onKeyup:L(A,["enter"]),"onUpdate:modelValue":d[0]||(d[0]=g=>W(s)?s.value=g:s=g),type:"password",autocomplete:"off",class:"p-2 w-full md:w-auto text-center text-white rounded border-none focus:outline-none text-lg text-bold bg-darkgray mr-4"},null,40,he),[[G,a(s)]]),e("button",{onClick:A,class:"bg-gradient-to-tr from-green to-orange rounded p-2 text-center hover:shadow-lg"},"Enter")])])):(r(),l("div",ve,ye))]))])}}},Ne=q(xe,[["__scopeId","data-v-2f879e9d"]]);export{Ne as default};
