import{_ as C}from"./UserPanel.e9a708ec.mjs";import{z as P,j as $,B as D,v as u,X as T,k as B,o as n,b as l,l as x,e as s,u as g,F as E,r as M,G as y,t as f,c as w,Q as b,R,Y as j,S as I,N as L}from"./entry.adf4cb79.mjs";const O={class:"flex flex-col md:flex-row w-full justify-between"},V={class:"md:w-4/5"},F=s("h1",{class:"text-5xl mb-6 text-orange text-shadow-sm border-b border-blue pb-4"},"Pastes",-1),H=["href"],J={class:"text-2xl font-bold"},Q={class:"text-sm font-normal italic text-gray-500"},U={class:"flex flex-row justify-between"},Y=["href"],z=["onClick"],A={key:1,class:"text-center"},G=s("h2",{class:"text-gray-400"},[y("You can create some pastes "),s("a",{href:"/",class:"text-green"},"here")],-1),X=[G],ee={__name:"index",setup(q){const _=P(),v=$();let a=D([]),i=u(void 0),d=u(!1),c=u(null);const k=async t=>{await v.addNotification({type:L.CONFIRM,title:"Delete paste?",description:"This action can not be reversed!"})&&(await $fetch(`/api/paste/${t}`,{method:"DELETE",credentials:"include"}),await p())},p=async()=>{const t=await $fetch("/api/user/pastes",{credentials:"include",parseResponse:JSON.parse});a=t.result.pastes,i.value=t.result.nextPage;for(let e=0;e<a.length;e++)a[e].created=new Date(a[e].created).toLocaleDateString()},N=async()=>{const t=c.value.scrollTop+c.value.clientHeight;if(i&&t>c.value.scrollHeight-20&&!d){d=!0;const e=await $fetch(`/api/user/pastes?pageId=${this.nextPageId}`,{credentials:"include",parseResponse:JSON.parse});i=e.result.nextPage;for(let r=0;r<e.result.pastes.length;r++)e.result.pastes[r].created=new Date(e.result.pastes[r].created).toLocaleDateString();a=a.concat(e.result.pastes),d=!1}},m=t=>{document.title=`Quickpaste | ${t}`};{let t=_.username();t==""?setTimeout(()=>{let e=_.username();m(e)},200):m(t)}return T(()=>{a.length===0&&p()}),(t,e)=>{const r=C,h=B("font-awesome-icon"),S=I;return n(),l("div",O,[x(r),s("div",V,[F,g(a).length>0?(n(),l("div",{key:0,ref_key:"pasteContainer",ref:c,class:"max-h-prose overflow-y-auto",onScroll:N},[(n(!0),l(E,null,M(g(a),o=>(n(),l("div",{key:o.uuid,class:"flex flex-col md:flex-row justify-between content-cetner mr-2 p-2 px-8 mb-4 rounded bg-blue"},[s("a",{href:`/${o.uuid}`},[s("h3",J,[y(f(o.title)+" ",1),s("span",Q,"#"+f(o.uuid),1),o.isPrivate?(n(),w(h,{key:0,icon:["fas","fa-eye-slash"],class:"text-sm ml-2 mb-px"})):b("",!0),o.password?(n(),w(h,{key:1,icon:["fas","fa-lock"],class:"text-sm ml-2 mb-px"})):b("",!0)]),x(S,null,{default:R(()=>[s("p",null,"Created: "+f(o.created),1)]),_:2},1024)],8,H),s("div",U,[s("a",{class:"bg-green flex-1 m-2 rounded p-4 text-center",href:`/${o.uuid}?edit=1`},"Edit",8,Y),s("button",{class:"bg-red-600 flex-1 m-2 rounded p-4 text-center",onClick:j(K=>k(o.uuid),["stop"])},"Remove",8,z)])]))),128))],544)):(n(),l("div",A,X))])])}}};export{ee as default};
